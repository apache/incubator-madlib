m4_include(`SQLCommon.m4')
/* -----------------------------------------------------------------------------
 * Test knn.
 *
 * FIXME: Verify results
 * -------------------------------------------------------------------------- */

drop table if exists knn_train_data;
create table knn_train_data (
id  integer,
data    integer[],
label   float);
copy knn_train_data (id, data, label) from stdin delimiter '|';
1|{1,1}|1.0
2|{2,2}|1.0
3|{3,3}|1.0
4|{4,4}|1.0
5|{4,5}|1.0
6|{20,50}|0.0
7|{10,31}|0.0
8|{81,13}|0.0
9|{1,111}|0.0
\.
drop table if exists knn_test_data;
create table knn_test_data (
id  integer,
data integer[]);
copy knn_test_data (id, data) from stdin delimiter '|';
1|{2,1}
2|{2,6}
3|{15,40}
4|{12,1}
5|{2,90}
6|{50,45}
\.

select * from madlib.knn('knn_train_data','data','label','knn_test_data','data','id','knn_results','c',3);
select * from madlib.knn('knn_train_data','data','label','knn_test_data','data','id','knn_results','r',3);
select * from madlib.knn('knn_train_data','data','label','knn_test_data','data','id','knn_results','c');
select * from madlib.knn();
select * from madlib.knn('help');
