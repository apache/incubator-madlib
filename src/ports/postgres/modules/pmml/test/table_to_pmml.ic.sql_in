/* ----------------------------------------------------------------------- *//**
 *
 * Licensed to the Apache Software Foundation (ASF) under one
 * or more contributor license agreements.  See the NOTICE file
 * distributed with this work for additional information
 * regarding copyright ownership.  The ASF licenses this file
 * to you under the Apache License, Version 2.0 (the
 * "License"); you may not use this file except in compliance
 * with the License.  You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing,
 * software distributed under the License is distributed on an
 * "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
 * KIND, either express or implied.  See the License for the
 * specific language governing permissions and limitations
 * under the License.
 *
 *//* ----------------------------------------------------------------------- */

---------------------------------------------------------------------------
-- logregr
---------------------------------------------------------------------------
CREATE TABLE "Patients" (
    id integer NOT NULL,
    "Second_attack" integer,
    "Treatment" integer,
    trait_anxiety integer,
    g1 char(1),
    g2 char(1)
);

INSERT INTO "Patients"(ID, "Second_attack", "Treatment", trait_anxiety, g1, g2) VALUES
( 1, 1, 1, 70, 'A', 'x'),
( 2, 1, 1, 80, 'A', 'y'),
( 8, 1, 0, 80, 'B', 'x');

SELECT logregr_train(
    '"Patients"',
    'no_grouping',
    '"Second_attack"',
    'ARRAY[1, "Treatment"]',
    NULL,
    1,
    'irls'
);

SELECT pmml('no_grouping');
---------------------------------------------------------------------------
-- linregr
---------------------------------------------------------------------------
CREATE TABLE houses (
    id SERIAL NOT NULL,
    tax INTEGER,
    bedroom REAL,
    bath REAL,
    price INTEGER,
    size INTEGER,
    lot INTEGER,
    g1 CHAR(1),
    g2 CHAR(1)
);

INSERT INTO houses(tax, bedroom, bath, price, size, lot, g1, g2) VALUES
( 590, 2, 1,    50000,  770, 22100, 'A', 'z'),
(1050, 3, 2,    85000, 1410, 12000, 'A', 'y'),
(1350, 2, 1,    90500,  820, 25700, 'A', 'x');

SELECT linregr_train(
    'houses',
    'linregr',
    'price',
    'array[1, bedroom]'
);

SELECT pmml('linregr');

